var c=Object.defineProperty;var l=(n,e,s)=>e in n?c(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var r=(n,e,s)=>(l(n,typeof e!="symbol"?e+"":e,s),s);import{_ as g}from"./index-11a9d463.js";import{d as _,l as m,m as p,ax as v}from"./myVue-ccd9a49f.js";class u{constructor(e,s){r(this,"_map",new WeakMap);r(this,"_animate",new WeakMap);this.list=e,this.duration=s,this.intMap(e)}intMap(e){const s=Array.from(e);for(let t of s){const a=t.getBoundingClientRect();this._map.set(t,a)}}async play(){var s;const e=Array.from(this.list);for(let t of e){(s=this._animate.get(t))==null||s.finish();const a=t.getBoundingClientRect();console.log(a.top,t);const o=this._map.get(t).top-a.top;this._map.set(t,a);const i=t.animate([{transform:`translateY(${o}px)`},{transform:"translateY(0)"}],{duration:this.duration,easing:"ease"});this._animate.set(t,i)}}}const f={class:"content"},h=v('<div draggable="true" class="item" data-v-4a1a5759>1</div><div draggable="true" class="item" data-v-4a1a5759>2</div><div draggable="true" class="item" data-v-4a1a5759>3</div><div draggable="true" class="item" data-v-4a1a5759>4</div><div draggable="true" class="item" data-v-4a1a5759>5</div><div draggable="true" class="item" data-v-4a1a5759>6</div>',6),x=[h],b={__name:"index",setup(n){let e,s;return _(()=>{const t=document.querySelector(".content");t.addEventListener("dragstart",a=>{a.stopPropagation(),e=a.target,setTimeout(()=>{a.target.classList.add("moving")},0),s=new u(t.childNodes,200)}),t.addEventListener("dragover",a=>{a.stopPropagation()}),t.addEventListener("dragend",a=>{console.log("拖拽结束"),a.target.classList.remove("moving")}),t.addEventListener("dragenter",a=>{if(a.target===t||a.target===e)return;const o=Array.from(t.childNodes),i=o.indexOf(e),d=o.indexOf(a.target);i>d?(console.log("向上拖动"),t.insertBefore(e,a.target)):i<d&&(console.log("向下拖动"),t.insertBefore(e,a.target.nextElementSibling)),s.play()})}),(t,a)=>(m(),p("div",f,x))}},E=g(b,[["__scopeId","data-v-4a1a5759"]]);export{E as default};
