import{_ as F,u as B,a as N,b as R,l as q,r as k,E as y}from"./index-e118b9b0.js";import{l as E,e as x,r as I,ag as d,o as u,c as T,a as g,W as a,Q as t,V as U,u as b,P as c,U as m,T as p}from"./myVue-6b61aabf.js";const S={class:"main"},$={class:"login"},D={class:"title"},M={__name:"index",setup(P){B();const w=N();E();const r=x("login"),o=x(),s=I({username:"",password:""}),_=l=>{r.value=l,o.value.resetFields()},V=()=>{o.value&&o.value.validate(l=>{l&&k({url:"/users/login",method:"post",data:{user_name:s.username,password:s.password}}).then(e=>{e.code===0&&(localStorage.setItem("token",e.result.token),y.success("登录成功！"),w.push("/"))})})},C=()=>{o.value&&o.value.validate(l=>{l&&k({url:"/users/register",method:"post",data:{user_name:s.username,password:s.password}}).then(e=>{e.code===0&&(y.success("注册成功！"),_("login"),s.username=e.result.user_name)})})};return(l,e)=>{const v=d("el-input"),f=d("el-form-item"),i=d("el-button"),h=d("el-form");return u(),T("div",S,[g("div",$,[a(h,{ref_key:"ruleFormRef",ref:o,model:s,"label-width":"auto",class:"demo-ruleForm","status-icon":""},{default:t(()=>[g("div",D,U(r.value==="login"?"欢迎登录":"注册"),1),a(f,{prop:"username",rules:[{required:!0,message:"请输入账号",trigger:"blur"}]},{default:t(()=>[a(v,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=n=>s.username=n),clearable:"",placeholder:"账号","prefix-icon":b(R)},null,8,["modelValue","prefix-icon"])]),_:1}),a(f,{prop:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},{default:t(()=>[a(v,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=n=>s.password=n),clearable:"","show-password":"",placeholder:"密码","prefix-icon":b(q)},null,8,["modelValue","prefix-icon"])]),_:1}),a(f,null,{default:t(()=>[r.value==="login"?(u(),c(i,{key:0,class:"login-btn",type:"primary",onClick:V},{default:t(()=>[m("登录")]),_:1})):p("",!0),r.value==="register"?(u(),c(i,{key:1,class:"login-btn",type:"success",onClick:C},{default:t(()=>[m("注册")]),_:1})):p("",!0)]),_:1}),g("div",null,[r.value==="login"?(u(),c(i,{key:0,class:"register",type:"primary",link:"",onClick:e[2]||(e[2]=n=>_("register"))},{default:t(()=>[m(" 立即注册 ")]),_:1})):p("",!0),r.value==="register"?(u(),c(i,{key:1,class:"register",type:"primary",link:"",onClick:e[3]||(e[3]=n=>_("login"))},{default:t(()=>[m(" 去登陆 ")]),_:1})):p("",!0)])]),_:1},8,["model"])])])}}},j=F(M,[["__scopeId","data-v-48f01b1c"]]);export{j as default};
